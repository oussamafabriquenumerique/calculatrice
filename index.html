<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Calculatrice</title>
</head>
<body>
    
</body>
</html>
<div class="container my-5">
    <div class="row">
        <div class="col-4"></div>
        <div class="col-4 border p-3 bg-light">
            <div class="row my-3">
                <input type="text" class="form-control p-3" style="height: 3rem;" disabled id="input">
            </div>
            <div class="row my-1">
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="1" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="2" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="3" readonly>                  
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark operator" value="+" readonly>           
                </div>
            </div>
            <div class="row my-1">
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="4" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="5" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="6" readonly>                  
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark operator" value="-" readonly>           
                </div>
            </div>
            <div class="row my-1">
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="7" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="8" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="9" readonly>                  
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark operator" value="*" readonly>           
                </div>
            </div>
            <div class="row my-1">
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark" id="equal" value="=" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="0" readonly>                   
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark chiffre" value="CE" readonly>                  
                </div>
                <div class="col-3">
                    <input class="w-100 btn btn-outline-dark operator" value="/" readonly>           
                </div>
            </div>
            
        </div>
        <div class="col-4"></div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>

    let input  = document.getElementById('input')
    let chiffres = document.querySelectorAll('.chiffre');
    let operators = document.querySelectorAll('.operator');
    let equal = document.querySelector('#equal')


        
    

    // à chaque fois qu'on clique sur un chiffre, on l'ajoute dans l'input
    for (let i=0; i<chiffres.length ; i++){
        chiffres[i].addEventListener("click", function(){
            // effacer la valeur de l'input
            if (chiffres[i].value === "CE"){
                input.value = ""
            }
            else{
                input.value+=chiffres[i].value 
            }
        })
    }

    // itérer la liste des opérateurs
    operators.forEach(element=>{
        element.addEventListener("click",()=>{
            // transformer la valeur de l'input en une liste
            input_list = input.value.split('')
            // récupérer le dernier élément de la liste
            last_element = input_list[input_list.length-1]
            // voir si le dernier élément est contenu dans la liste des opérateurs, sinon on l'ajoute
            if (input.value != ""){
                if (!(["+" , "-" , "*" , "/", "="].includes(last_element))){
                    input.value+=element.value
                }
                if (last_element==="="){
                   console.log(input.value)
                }
            }
        })
    })

    $("#equal").click(function(){
        input.value = eval(input.value)
    })

   

    document.addEventListener("keypress", function(e){
        if (((Number(e.key)) || (e.key == '+') || (e.key == '-') || (e.key == '*') || (e.key == '/'))) {
            input.value+=e.key 

        }
        if ((e.key === "=")||(e.key==="Enter")){
            input.value = eval(input.value)
        }
    })  
    

    
    
</script>
